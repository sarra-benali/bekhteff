!function(e){"use strict";var t=e("body"),o=e(".primary-sidebar"),n=window.tmcore.Helpers,r=250,a="collapsed",i="sidebar-widgets-collapsible";function d(t,d={}){var s=e.extend(!0,{},{loadMore:0,scrollTop:0,loadNext:0},d);t=decodeURIComponent(t),s.loadMore||history.pushState({},null,t);var c=e(".load-more-button");e.ajax({url:t,type:"GET",dataType:"html",success:function(t){var d=e(t),c=e(".woo-archive-loop");s.loadMore||s.loadNext||c.children(".woo-archive-loop").children(".entry").remove();var u=d.find(".woocommerce-pagination .page-numbers"),f=d.find(".woo-archive-loop .entry");s.loadNext||s.loadMore?c.append(f):c.html(f);var m=[".woocommerce-result-count",".woocommerce-pagination",".load-more-wrap","#active-filters-bar",".order-by",".orderby",".page-load-status"];e(".tmcore-wp-widget-filter").each((function(){var t=e(this).attr("id");m.push("#"+t)}));for(var p=m.length,h=0;h<p;h++){var w=m[h],g=e(w);if(g.length>0){g.empty();var v=d.find(w);v.length>0&&g.replaceWith(v)}}if(e(document.body).trigger("tmcore_get_product_fragments_loaded"),s.scrollTop){var b=c.offset().top;b-=198,b=Math.max(0,b),e("html, body").animate({scrollTop:b},300)}o.each((function(){var t=e(this);t.hasClass(i)&&t.find(".widget:not(."+a+")").find(".widget-content").stop().slideDown(r)})),e.fn.perfectScrollbar&&!n.isHandheld()&&o.find(".widget-scrollable").each((function(){e(this).find(".widget-content-inner").perfectScrollbar("update")})),u.length>0&&(!function(){var e=document.querySelector(".content-wrap[data-infinite-scroll]");if(e){let o=JSON.parse(e.dataset.infiniteScroll);var t=new InfiniteScroll(".content-wrap[data-infinite-scroll]",{path:o.path,append:o.append,hideNav:o.hideNav,status:o.status});t.isLoading=!1,t.canLoad=!0,t.create()}}(),e(".load-more-wrap .shop-load-more-button").attr("style","display:unset")),l(),e(window).trigger("tmcore_lazy_load"),e(window).trigger("tmcore_lazy_shimmer")},beforeSend:function(){s.loadMore?n.setElementHandling(c):n.setBodyHandling()},complete:function(){s.loadMore?n.unsetElementHandling(c):n.setBodyCompleted()}})}function l(){var t=function(e,o,n){var r,a={$daysSpan:e.find(".countdown-days"),$hoursSpan:e.find(".countdown-hours"),$minutesSpan:e.find(".countdown-minutes"),$secondsSpan:e.find(".countdown-seconds")},i=function(){var e=t.getTimeRemaining(o);n.each(e.parts,(function(e){var t=a["$"+e+"Span"],o=this.toString();1===o.length&&(o=0+o),t.length&&t.text(o)})),e.total<=0&&clearInterval(r)};i(),r=setInterval(i,1e3)};t.getTimeRemaining=function(e){var t=e-new Date,o=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60),r=Math.floor(t/36e5%24),a=Math.floor(t/864e5);return(a<0||r<0||n<0)&&(o=n=r=a=0),{total:t,parts:{days:a,hours:r,minutes:n,seconds:o}}},e('[data-countdown="true"]').each((function(o,n){var r=new Date(1e3*e(this).data("date"));new t(e(this),r,e)}))}e(document).ready((function(){1==tmCoreShop.is_collapsable&&e(".sidebar-slug-sidebar-woocommerce-shop").addClass("sidebar-widgets-collapsible"),function(){if(0>=o.length)return;o.find(".widget").each((function(){var t=e(this);if(t.hasClass("widget_block"))return!0;t.children().not(".widget-title, .widgettitle, .widget-instance, .widget-content").wrapAll('<div class="widget-content"><div class="widget-content-inner"></div></div>'),t.hasClass("widget-scrollable")&&e.fn.perfectScrollbar&&!n.isHandheld()&&t.find(".widget-content-inner").perfectScrollbar()})),o.each((function(){var t=e(this);t.hasClass(i)&&t.on("click",".widget-title, .widgettitle",(function(t){var o=e(this).closest(".widget");o.hasClass(a)?(o.removeClass(a),o.find(".widget-content").stop().slideDown(r)):(o.addClass(a),o.find(".widget-content").stop().slideUp(r))}))}))}(),e(document.body).on("click",".tmcore-wp-widget-filter .filter-link",(function(o){o.preventDefault();var r=e(this),a=r.parent("li"),i=r.closest("ul"),l=r.attr("href");if(i.hasClass("single-choice")){if(a.hasClass("chosen"))return;a.addClass("chosen").siblings().removeClass("chosen")}else r.parent("li").toggleClass("chosen");var s=e(this).closest(".primary-sidebar");s.length>0&&(t.removeClass("off-sidebar-opened"),s.removeClass("off-sidebar-active"),n.unsetBodyOverflow()),d(l)})),e(document.body).on("click",".js-product-filter-link",(function(t){t.preventDefault();var o=e(this);o.hasClass("disabled")||d(o.attr("href"))})),e(document.body).on("change",".tmcore-wp-widget-product-layered-nav-dropdown",(function(){var t=e(this).closest("form"),o=t.find(".filter-name"),n=e(this).val();o.val(n),t.trigger("submit")})),e(document.body).on("submit",".tmcore-wp-widget-product-layered-nav-form",(function(){var t=e(this),o=t.find(".filter-name"),r=t.find(".filter-query-type"),a=o.val(),i=t.attr("action");return i=n.addUrlParam(i,o.attr("name"),a),r.length>0&&(i=""===a?n.removeUrlParam(i,r.attr("name")):n.addUrlParam(i,r.attr("name"),r.val())),d(i),!1})),e(document.body).on("click",".woocommerce-pagination a.page-numbers",(function(t){t.preventDefault(),d(e(this).attr("href"),{scrollTop:1})})),e(document.body).on("change",".woocommerce-ordering select.orderby",(function(t){return t.preventDefault(),d(n.addUrlParam(window.location.href,"orderby",e(this).val())),!1})),e(document.body).on("submit","form.woocommerce-ordering",(function(e){return e.preventDefault(),!1})),e(document.body).on("click",".tmcore-wp-widget-product-sorting .order-by a",(function(t){t.preventDefault(),d(n.addUrlParam(window.location.href,"orderby",e(this).data("order")))})),e(".content-wrap[data-infinite-scroll]").on("append.infiniteScroll",(function(t,o,n,r,a){let i=e(".woocommerce-result-count .showing").text(),d=e(".woocommerce-result-count .result").text(),s=Number(i)+Number(tmCoreShop.per_page),c=Number(d);s>=c&&(s=c),i=s>=c?c:s,e(".woocommerce-result-count .showing").text(i),l(),e(window).trigger("tmcore_lazy_load"),e(window).trigger("tmcore_lazy_shimmer"),s<c?e(".products.ajax-load").show():s==c&&e(".products.ajax-load").hide()}))}))}(jQuery);